<canvas id="gc" width="400" height="400"></canvas>

		<script type="text/javascript" src="web3.js"></script>
		<script type="text/javascript" src="ethjs.js"></script>
		<script type="text/javascript">
		</script>

<script>
window.onload=function()
 {
	canv=document.getElementById("gc");
	ctx=canv.getContext("2d");
	document.addEventListener("keydown",keyPush);
	setInterval(game,1000/15);
}

px=py=10;
gs=tc=20;
ax=ay=15;
xv=yv=0;
trail=[];
tail = 5;


			var eth;

			if (0 &&typeof window.web3 !== 'undefined' && typeof window.web3.currentProvider !== 'undefined')
			{
				 eth = new Eth(window.web3.currentProvider);
				 console.log("making a new eth from web3");
			}
			else
			{
				var currentProvider = new Web3.providers.HttpProvider('http://localhost:7545');
				var web3 = new Web3(currentProvider);
				eth = new Eth(web3.currentProvider);
				console.log("connected to local host");

			}

var contractABI =
	[
			{
				"constant": false,
				"inputs": [
					{
						"name": "_points",
						"type": "uint256"
					}
				],
				"name": "addPoints",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"constant": true,
				"inputs": [],
				"name": "getPoints",
				"outputs": [
					{
						"name": "",
						"type": "uint256"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			}
		];
var contractAddress = '0xCAf22b02250339642e73e6A3a2d9dC53653a30E8';
var Accountaddress = '0x7099b34900d2a33aa124fc5ba2a8a90e5dd5ebe1'

var contractAbi = eth.contract(contractABI);
var myContract = contractAbi.at(contractAddress);
myContract.getPoints.call().then(function(a){a,console.log(a[0].words,a,a.toString(),+a.toString(),'Bananas');});




function game()
{
	px+=xv;
	py+=yv;
	if(px<0) {
		px= tc-1;
	}
	if(px>tc-1) {
		px= 0;
	}
	if(py<0) {
		py= tc-1;
	}
	if(py>tc-1) {
		py= 0;
	}
	ctx.fillStyle="black";
	ctx.fillRect(0,0,canv.width,canv.height);

	ctx.fillStyle="lime";
	for(var i=0;i<trail.length;i++) {
		ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
		if(trail[i].x==px && trail[i].y==py) {
			tail = 5;
		}
	}
	trail.push({x:px,y:py});
	while(trail.length>tail)
	{
		trail.shift();
	}

	if(ax==px && ay==py) {
		tail++;
		ax=Math.floor(Math.random()*tc);
		ay=Math.floor(Math.random()*tc);
	}
	ctx.fillStyle="red";
	ctx.fillRect(ax*gs,ay*gs,gs-2,gs-2);
}

function keyPush(evt)
{
	switch(evt.keyCode)
	{
		case 37:
			xv=-1;yv=0;
			break;
		case 38:
			xv=0;yv=-1;
			break;
		case 39:
			xv=1;yv=0;
			break;
		case 40:
			xv=0;yv=1;
			break;
	}
}
</script>
